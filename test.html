<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Test Supabase Insert</title>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'

    // ✅ ใส่ URL และ KEY ของโปรเจกต์คุณ
    const SUPABASE_URL = 'https://diwywcrdttidmlwbwxln.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpd3l3Y3JkdHRpZG1sd2J3eGxuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxMDcyOTMsImV4cCI6MjA2NDY4MzI5M30.0H3N7R1xLWP8GP-b1zoECiLuYE8mTp8vfNbEqUDnAUg'; // ← ตัดให้ย่อ
    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('test-form');

      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const item_id = document.getElementById('item_id').value;
        const item_name = document.getElementById('item_name').value;
        const borrower = document.getElementById('borrower').value;
        const return_time = document.getElementById('return_time').value;

        const { error } = await supabase.from('borrowings').insert([
          {
            item_id,
            item_name,
            borrower,
            return_time
          }
        ]);

        if (error) {
          console.error(error);
          Swal.fire('❌ Failed', error.message, 'error');
        } else {
          Swal.fire('✅ Success', 'Data saved to Supabase!', 'success');
          form.reset();
        }
      });
    });
  </script>
</head>
<body style="font-family: sans-serif; max-width: 400px; margin: 40px auto;">
  <h2>Test Supabase Insert</h2>
  <form id="test-form">
    <label>Item ID:<br><input type="text" id="item_id" required></label><br><br>
    <label>Item Name:<br><input type="text" id="item_name" required></label><br><br>
    <label>Borrower:<br><input type="text" id="borrower" required></label><br><br>
    <label>Return Time:<br><input type="time" id="return_time" required></label><br><br>
    <button type="submit">Submit</button>
  </form>
</body>
</html>
